<form #form='ngForm' [formGroup]='formGroup' (submit)='saveRegistration()'>
    <div class="container overflow-hidden mt-1 pb-2">
        <div class="row">
            <div class="col-md-6 col-12 offset-md-3 pb-2 background-All">
                <div class="container">
                    <div class="row pt-2">
                        <div class="col-12 col-md-5">
                            <mat-form-field appearance='outline'>
                                <mat-label>Salutation</mat-label>
                                <mat-select formControlName='salutation'>
                                    <mat-option value='Mr'>Mr</mat-option>
                                    <mat-option value='Miss'>Miss</mat-option>
                                    <mat-option value='Mrs'>Mrs</mat-option>
                                    <mat-option value='Baby'>Baby</mat-option>
                                    <mat-option value='Child'>Child</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12 col-md-11">
                            <mat-form-field appearance='outline'>
                                <mat-label>Patient Name *</mat-label>
                                <input matInput formControlName='name' autocomplete="off" />
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12 col-lg-5">
                            <mat-form-field appearance='outline'>
                                <mat-label>Age *</mat-label>
                                <input matInput formControlName='age' autocomplete="off" />
                            </mat-form-field>
                        </div>
                        <div class="col-12 col-md-6">
                            <mat-form-field appearance='outline'>
                                <mat-label>Gender</mat-label>
                                <mat-select formControlName='gender' (valueChange)='setGender()'>
                                    <mat-option value='Male'>Male</mat-option>
                                    <mat-option value='Female'>Female</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-11">
                            <mat-form-field appearance='outline'>
                                <mat-label>Contact No *</mat-label>
                                <input matInput formControlName='contactNo' autocomplete="off" />
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-11">
                            <mat-form-field appearance='outline'>
                                <mat-label>Email ID</mat-label>
                                <input matInput formControlName='email' autocomplete="off" />
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12 col-md-8">
                            <mat-form-field appearance='outline'>
                                <mat-label>DOB</mat-label>
                                <input matInput formControlName='dob' [matDatepicker]='picker' autocomplete="off" />
                                <mat-datepicker-toggle matSuffix [for]='picker'></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-11">
                            <mat-form-field appearance='outline'>
                                <mat-label>Address</mat-label>
                                <textarea matInput formControlName='address'></textarea>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-11">
                            <mat-form-field appearance='outline'>
                                <mat-label>Consultant *</mat-label>
                                <mat-select formControlName='consultant'>
                                    <mat-option value=''>Select</mat-option>
                                    <mat-option *ngFor='let doctor of doctors$ | async' [value]='doctor.id'>
                                        {{doctor.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12 text-center">
                <span class="fa fa-asterisk" style="font-size: 6px; color: Red;"></span><label>&nbsp;Required
                    Fields</label>
            </div>
        </div>
        <div class="row text-center">
            <div class="col">
                <button class="btn btn-success btn-sm" [disabled]='formGroup.invalid || saving'>Save</button>
                <button type="button" class="btn btn-danger btn-sm" (click)="clearValues()">
                    Clear</button>
                <a routerLink='/reception/patients-list' class="btn btn-primary btn-sm">View Patients</a>
            </div>
        </div>
    </div>
</form>

<ng-template #successTemplate>
    <div class="row text-center">
        <div class="col">
            <span class="fa fa-5x fa-check text-success"></span>
        </div>
    </div>
    <div class="row text-center">
        <div class="col">
            <h4>Success</h4>
        </div>
    </div>
    <div class="mt-3 row text-center">
        <div class="col">
            <h6>{{successMessage}}</h6>
        </div>
    </div>
    <div class="row mt-3 text-center">
        <div class="col">
            <button class="btn btn-primary" (click)="printRegistration()">Print Registration</button>
            <button class="btn btn-success" (click)="goToPage('bill')">OP Billing</button>
            <button class="btn btn-info" (click)="goToPage('admission')">IP Admission</button>
            <button class="btn btn-secondary" mat-dialog-close>Close</button>
        </div>
    </div>
</ng-template>