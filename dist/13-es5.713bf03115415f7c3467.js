!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var i,n=r(t);if(e){var o=r(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return a(this,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{fwRw:function(e,n,a){"use strict";a.r(n),a.d(n,"CashCounterModule",function(){return be});var r,c,u,b,d,p,h=a("3Pt+"),f=a("ofXK"),m=a("Qu3c"),g=a("bTqV"),v=a("fXoL"),y=a("FKr1"),T=a("8LU1"),U=a("R1ws"),C=a("u47x"),k=a("0EQZ"),P=["input"],x=function(){return{enterDuration:150}},w=["*"],_=new v.s("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}}),N=0,J={provide:h.p,useExisting:Object(v.V)(function(){return G}),multi:!0},I=l(function t(e,i){s(this,t),this.source=e,this.value=i}),M=new v.s("MatRadioGroup"),O=((c=function(){function t(e){s(this,t),this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+N++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=function(){},this.onTouched=function(){},this.change=new v.o}return l(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t,this._updateRadioButtonNames()}},{key:"labelPosition",get:function(){return this._labelPosition},set:function(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}},{key:"value",get:function(){return this._value},set:function(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}},{key:"_checkSelectedRadioButton",value:function(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(T.c)(t),this._markRadiosForCheck()}},{key:"required",get:function(){return this._required},set:function(t){this._required=Object(T.c)(t),this._markRadiosForCheck()}},{key:"ngAfterContentInit",value:function(){this._isInitialized=!0}},{key:"_touch",value:function(){this.onTouched&&this.onTouched()}},{key:"_updateRadioButtonNames",value:function(){var t=this;this._radios&&this._radios.forEach(function(e){e.name=t.name,e._markForCheck()})}},{key:"_updateSelectedRadioFromValue",value:function(){var t=this;this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(function(e){e.checked=t.value===e.value,e.checked&&(t._selected=e)}))}},{key:"_emitChangeEvent",value:function(){this._isInitialized&&this.change.emit(new I(this._selected,this._value))}},{key:"_markRadiosForCheck",value:function(){this._radios&&this._radios.forEach(function(t){return t._markForCheck()})}},{key:"writeValue",value:function(t){this.value=t,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(t){this._controlValueAccessorChangeFn=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t,this._changeDetector.markForCheck()}}]),t}()).\u0275fac=function(t){return new(t||c)(v.Ob(v.h))},c.\u0275dir=v.Jb({type:c,inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"}}),c),G=((r=function(t){i(n,t);var e=o(n);function n(){return s(this,n),e.apply(this,arguments)}return l(n)}(O)).\u0275fac=function(t){return D(t||r)},r.\u0275dir=v.Jb({type:r,selectors:[["mat-radio-group"]],contentQueries:function(t,e,i){var n;1&t&&v.Hb(i,B,1),2&t&&v.vc(n=v.dc())&&(e._radios=n)},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[v.Bb([J,{provide:M,useExisting:r}]),v.zb]}),r),D=v.Wb(G),A=l(function t(e){s(this,t),this._elementRef=e}),F=Object(y.s)(Object(y.w)(A)),S=((d=function(t){i(n,t);var e=o(n);function n(t,i,o,a,r,c,l,u){var b;return s(this,n),(b=e.call(this,i))._changeDetector=o,b._focusMonitor=a,b._radioDispatcher=r,b._animationMode=c,b._providerOverride=l,b._uniqueId="mat-radio-"+ ++N,b.id=b._uniqueId,b.change=new v.o,b._checked=!1,b._value=null,b._removeUniqueSelectionListener=function(){},b.radioGroup=t,u&&(b.tabIndex=Object(T.f)(u,0)),b._removeUniqueSelectionListener=r.listen(function(t,e){t!==b.id&&e===b.name&&(b.checked=!1)}),b}return l(n,[{key:"checked",get:function(){return this._checked},set:function(t){var e=Object(T.c)(t);this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}},{key:"value",get:function(){return this._value},set:function(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}},{key:"labelPosition",get:function(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"},set:function(t){this._labelPosition=t}},{key:"disabled",get:function(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled},set:function(t){this._setDisabled(Object(T.c)(t))}},{key:"required",get:function(){return this._required||this.radioGroup&&this.radioGroup.required},set:function(t){this._required=Object(T.c)(t)}},{key:"color",get:function(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"},set:function(t){this._color=t}},{key:"inputId",get:function(){return"".concat(this.id||this._uniqueId,"-input")}},{key:"focus",value:function(t,e){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}},{key:"_markForCheck",value:function(){this._changeDetector.markForCheck()}},{key:"ngOnInit",value:function(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}},{key:"ngAfterViewInit",value:function(){var t=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe(function(e){!e&&t.radioGroup&&t.radioGroup._touch()})}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}},{key:"_emitChangeEvent",value:function(){this.change.emit(new I(this,this._value))}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_onInputClick",value:function(t){t.stopPropagation()}},{key:"_onInputChange",value:function(t){t.stopPropagation();var e=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),e&&this.radioGroup._emitChangeEvent())}},{key:"_setDisabled",value:function(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}}]),n}(F)).\u0275fac=function(t){return new(t||d)(v.Ob(O),v.Ob(v.l),v.Ob(v.h),v.Ob(C.h),v.Ob(k.d),v.Ob(String),v.Ob(void 0),v.Ob(String))},d.\u0275dir=v.Jb({type:d,viewQuery:function(t,e){var i;1&t&&v.Nc(P,1),2&t&&v.vc(i=v.dc())&&(e._inputElement=i.first)},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[v.zb]}),d),B=((b=function(t){i(n,t);var e=o(n);function n(t,i,o,a,r,c,l,u){return s(this,n),e.call(this,t,i,o,a,r,c,l,u)}return l(n)}(S)).\u0275fac=function(t){return new(t||b)(v.Ob(M,8),v.Ob(v.l),v.Ob(v.h),v.Ob(C.h),v.Ob(k.d),v.Ob(U.a,8),v.Ob(_,8),v.Zb("tabindex"))},b.\u0275cmp=v.Ib({type:b,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(t,e){1&t&&v.cc("focus",function(){return e._inputElement.nativeElement.focus()}),2&t&&(v.Db("tabindex",null)("id",e.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),v.Gb("mat-radio-checked",e.checked)("mat-radio-disabled",e.disabled)("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-primary","primary"===e.color)("mat-accent","accent"===e.color)("mat-warn","warn"===e.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[v.zb],ngContentSelectors:w,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(t,e){if(1&t&&(v.nc(),v.Ub(0,"label",0,1),v.Ub(2,"span",2),v.Pb(3,"span",3),v.Pb(4,"span",4),v.Ub(5,"input",5,6),v.cc("change",function(t){return e._onInputChange(t)})("click",function(t){return e._onInputClick(t)}),v.Tb(),v.Ub(7,"span",7),v.Pb(8,"span",8),v.Tb(),v.Tb(),v.Ub(9,"span",9),v.Ub(10,"span",10),v.Jc(11,"\xa0"),v.Tb(),v.mc(12),v.Tb(),v.Tb()),2&t){var i=v.wc(1);v.Db("for",e.inputId),v.Cb(5),v.oc("id",e.inputId)("checked",e.checked)("disabled",e.disabled)("tabIndex",e.tabIndex)("required",e.required),v.Db("name",e.name)("value",e.value)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby)("aria-describedby",e.ariaDescribedby),v.Cb(2),v.oc("matRippleTrigger",i)("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",v.qc(18,x)),v.Cb(2),v.Gb("mat-radio-label-before","before"==e.labelPosition)}},directives:[y.m],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5)}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),b),L=((u=l(function t(){s(this,t)})).\u0275fac=function(t){return new(t||u)},u.\u0275mod=v.Mb({type:u}),u.\u0275inj=v.Lb({imports:[[y.n,y.h],y.h]}),u),R=a("0IaG"),E=a("/1cH"),V=a("kmnG"),z=a("qFsG"),H=a("tyNb"),j=a("AytR"),Y=a("tk/3"),K=a("b9Fr"),q=((p=function(){function t(e,i){s(this,t),this.http=e,this.encoder=i,this.currentUrl=j.a.normUrl+"cash-counter/op-billing",this.extrasUrl=j.a.normUrl+"extras/"}return l(t,[{key:"getAll",value:function(){return this.http.get(this.currentUrl)}},{key:"getPatientsList",value:function(t){return this.http.get(this.currentUrl+"/search-patients",{params:{search:t}})}},{key:"getIds",value:function(){return this.http.get(this.currentUrl+"/ids")}},{key:"getPatientDetails",value:function(t){return this.http.get("".concat(this.currentUrl,"/patient-details/").concat(t))}},{key:"getFees",value:function(t,e){return this.http.get("".concat(this.currentUrl,"/").concat(t,"/").concat(e))}},{key:"saveBill",value:function(t){return this.http.post(this.currentUrl,t)}},{key:"getBillYears",value:function(){return this.http.get(this.currentUrl+"/years")}},{key:"getBillNos",value:function(t){return this.http.get("".concat(this.currentUrl,"/billnos/").concat(t))}},{key:"getBillDetails",value:function(t){return this.http.get("".concat(this.currentUrl,"/").concat(t))}},{key:"updateBillDetails",value:function(t,e){return this.http.patch("".concat(this.currentUrl,"/").concat(t),e,{responseType:"text"})}},{key:"deleteBill",value:function(t){return this.http.delete("".concat(this.currentUrl,"/").concat(t),{responseType:"text"})}},{key:"addPayType",value:function(t){return this.http.post("".concat(this.extrasUrl,"pay-type"),"pay-type=".concat(encodeURIComponent(t)),{responseType:"text"})}},{key:"removePayType",value:function(t){return this.http.delete("".concat(this.extrasUrl,"pay-type/").concat(encodeURIComponent(t)),{responseType:"text"})}},{key:"addCardType",value:function(t){return this.http.post("".concat(this.extrasUrl,"card-type"),"card-type=".concat(encodeURIComponent(t)),{responseType:"text"})}},{key:"removeCardType",value:function(t){return this.http.delete("".concat(this.extrasUrl,"card-type/").concat(encodeURIComponent(t)),{responseType:"text"})}},{key:"GetInputs",value:function(){return{search:"",ddlPID:"",pid:"0",name:"",age:"",gender:"Male",contact:"",cons:"",feesType:"",fees:"",otherType:"",total:0,discount:0,subTotal:0,paying:0,due:0,refund:0,cardNo:"",cardType:"",cardExpiry:"",payType:"Cash",year:"",billNo:""}}}]),t}()).\u0275fac=function(t){return new(t||p)(v.Yb(Y.b),v.Yb(K.a))},p.\u0275prov=v.Kb({token:p,factory:p.\u0275fac}),p),Q=a("1G5W"),W=a("Kj3r"),X=a("JX91"),Z=a("lJxs"),tt=a("XNiG"),et=a("5eHb"),it=a("OlR4"),nt=a("gren"),ot=["cardTemplate"],at=["patientsTemplate"],rt=["cost"],ct=["feesType"];function lt(t,e){if(1&t&&(v.Ub(0,"option",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Kc(i)}}function st(t,e){if(1&t&&(v.Ub(0,"option",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i.id),v.Cb(1),v.Kc(i.billNo)}}function ut(t,e){if(1&t){var i=v.Vb();v.Ub(0,"div",3),v.Ub(1,"div",57),v.Ub(2,"label",10),v.Jc(3,"Bill Year"),v.Tb(),v.Ub(4,"select",58),v.cc("change",function(){return v.zc(i),v.gc().getBillNos()}),v.Ub(5,"option",20),v.Jc(6,"--Select--"),v.Tb(),v.Hc(7,lt,2,2,"option",21),v.Tb(),v.Tb(),v.Ub(8,"div",57),v.Ub(9,"label",10),v.Jc(10,"Bill No"),v.Tb(),v.Ub(11,"select",59),v.cc("change",function(){return v.zc(i),v.gc().getBillDetails()}),v.Ub(12,"option",20),v.Jc(13,"--Select--"),v.Tb(),v.Hc(14,st,2,2,"option",21),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=v.gc();v.Cb(7),v.oc("ngForOf",n.billYears),v.Cb(7),v.oc("ngForOf",n.billNos)}}function bt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"div",8),v.Ub(1,"div",61),v.Ub(2,"input",62),v.cc("keyup",function(t){return v.zc(i),v.gc().searchPatients(t)}),v.Tb(),v.Tb(),v.Tb()}}function dt(t,e){if(1&t&&(v.Ub(0,"option",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i.id),v.Cb(1),v.Kc(i.uhid)}}function pt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"select",63),v.cc("change",function(){return v.zc(i),v.gc().getPatientDetails()}),v.Ub(1,"option",20),v.Jc(2,"--select--"),v.Tb(),v.Hc(3,dt,2,2,"option",21),v.Tb()}if(2&t){var n=v.gc();v.Cb(3),v.oc("ngForOf",n.pidList)}}function ht(t,e){if(1&t&&v.Pb(0,"input",15),2&t){var i=v.gc();v.pc("value",i.formGroup.get("oldPtId").value)}}function ft(t,e){if(1&t&&(v.Ub(0,"option",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i.id),v.Cb(1),v.Kc(i.name)}}function mt(t,e){if(1&t&&(v.Ub(0,"mat-option",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Lc(" ",i,"")}}function gt(t,e){if(1&t){var i=v.Vb();v.Sb(0,64),v.Ub(1,"tr",65),v.Ub(2,"td"),v.Jc(3),v.Tb(),v.Ub(4,"td"),v.Jc(5),v.Tb(),v.Ub(6,"td"),v.Jc(7),v.hc(8,"number"),v.Tb(),v.Ub(9,"td"),v.Ub(10,"input",66),v.cc("keyup",function(){return v.zc(i),v.gc().calculateTotal()}),v.Tb(),v.Tb(),v.Ub(11,"td"),v.Ub(12,"button",67),v.cc("click",function(){v.zc(i);var t=e.index;return v.gc().removeFees(t)}),v.Pb(13,"i",68),v.Tb(),v.Tb(),v.Tb(),v.Rb()}if(2&t){var n=e.$implicit,o=e.index;v.Cb(1),v.oc("formGroupName",o),v.Cb(2),v.Kc(n.get("category").value),v.Cb(2),v.Kc(n.get("feesType").value),v.Cb(2),v.Kc(v.jc(8,4,n.get("cost").value,"1.2-2"))}}function vt(t,e){if(1&t&&(v.Ub(0,"mat-radio-button",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Lc("",i," ")}}function yt(t,e){if(1&t&&(v.Ub(0,"mat-option",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Kc(i)}}function Tt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"div",69),v.Ub(1,"mat-form-field"),v.Ub(2,"mat-label"),v.Jc(3,"Other Payment"),v.Tb(),v.Pb(4,"input",70),v.Ub(5,"button",71),v.cc("click",function(){return v.zc(i),v.gc().addPayType()}),v.Ub(6,"i",72),v.Jc(7,"add_circle"),v.Tb(),v.Tb(),v.Ub(8,"button",73),v.cc("click",function(){return v.zc(i),v.gc().removePayType()}),v.Ub(9,"i",72),v.Jc(10,"remove_circle"),v.Tb(),v.Tb(),v.Ub(11,"mat-autocomplete",null,74),v.Hc(13,yt,2,2,"mat-option",21),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=v.wc(12),o=v.gc();v.Cb(4),v.oc("matAutocomplete",n),v.Cb(9),v.oc("ngForOf",o.paymentMethods)}}function Ut(t,e){if(1&t&&(v.Ub(0,"mat-option",60),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Kc(i)}}function Ct(t,e){if(1&t){var i=v.Vb();v.Ub(0,"div",75),v.Ub(1,"h4",76),v.Jc(2,"Card Details"),v.Tb(),v.Tb(),v.Ub(3,"div",3),v.Ub(4,"mat-form-field"),v.Ub(5,"mat-label"),v.Jc(6,"Card No"),v.Tb(),v.Pb(7,"input",77),v.Tb(),v.Tb(),v.Ub(8,"div",3),v.Ub(9,"mat-form-field"),v.Ub(10,"mat-label"),v.Jc(11,"Card Type"),v.Tb(),v.Pb(12,"input",78),v.Ub(13,"button",71),v.cc("click",function(){return v.zc(i),v.gc().addCardType()}),v.Ub(14,"i",72),v.Jc(15,"add_circle"),v.Tb(),v.Tb(),v.Ub(16,"button",73),v.cc("click",function(){return v.zc(i),v.gc().removeCardType()}),v.Ub(17,"i",72),v.Jc(18,"remove_circle"),v.Tb(),v.Tb(),v.Ub(19,"mat-autocomplete",null,74),v.Hc(21,Ut,2,2,"mat-option",21),v.Tb(),v.Tb(),v.Tb(),v.Ub(22,"div",3),v.Ub(23,"mat-form-field"),v.Ub(24,"mat-label"),v.Jc(25,"Card Expiry"),v.Tb(),v.Pb(26,"input",79),v.Tb(),v.Tb(),v.Ub(27,"div",80),v.Ub(28,"div",4),v.Ub(29,"button",81),v.Jc(30,"Close"),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=v.wc(20),o=v.gc();v.Cb(12),v.oc("matAutocomplete",n),v.Cb(9),v.oc("ngForOf",o.cardTypes)}}function kt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"tr"),v.Ub(1,"td"),v.Jc(2),v.Tb(),v.Ub(3,"td"),v.Jc(4),v.Tb(),v.Ub(5,"td"),v.Jc(6),v.Tb(),v.Ub(7,"td"),v.Ub(8,"button",85),v.cc("click",function(){v.zc(i);var t=e.$implicit;return v.gc(2).setPatientID(t.id)}),v.Pb(9,"span",86),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=e.$implicit;v.Cb(2),v.Kc(n.id),v.Cb(2),v.Kc(n.name),v.Cb(2),v.Kc(n.contact)}}function Pt(t,e){if(1&t&&(v.Ub(0,"div",75),v.Ub(1,"h4",76),v.Jc(2,"Patients List"),v.Tb(),v.Tb(),v.Ub(3,"div",82),v.Ub(4,"table",83),v.Ub(5,"thead"),v.Ub(6,"th"),v.Jc(7,"ID"),v.Tb(),v.Ub(8,"th"),v.Jc(9,"Name"),v.Tb(),v.Ub(10,"th"),v.Jc(11,"Phone No"),v.Tb(),v.Ub(12,"th"),v.Jc(13,"Select"),v.Tb(),v.Tb(),v.Ub(14,"tbody"),v.Hc(15,kt,10,3,"tr",84),v.Tb(),v.Tb(),v.Tb(),v.Ub(16,"div",80),v.Ub(17,"div",4),v.Ub(18,"button",81),v.Jc(19,"Close"),v.Tb(),v.Tb(),v.Tb()),2&t){var i=v.gc();v.Cb(15),v.oc("ngForOf",i.searchList)}}var xt,wt=((xt=function(){function e(t,i,n,o,a,r,c){s(this,e),this.service=t,this.toastr=i,this.common=n,this.dialog=o,this.ngxLoaderService=a,this.renderer=r,this.fb=c}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.common.mainData.next({header:"OP Billing",treeView:"liCashCounter",subTreeView:"",menu:"liOPBill"}),this.initProperties(),this.autoCompleteFeesType(),this.service.getAll().pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(i){var n,o,a,r,c,l,s,u,b;(n=e.pidList).push.apply(n,t(i.pid)),(o=e.consList).push.apply(o,t(i.cons)),(a=e.feesList).push.apply(a,t(i.fees)),(r=e.testList).push.apply(r,t(i.lab)),(c=e.groupTestList).push.apply(c,t(i.groupTests)),(l=e.profilesList).push.apply(l,t(i.profiles));var d=i.fees.map(function(t){return t.name}).concat(i.lab.map(function(t){return t.name}),i.groupTests.map(function(t){return t.name}),i.profiles.map(function(t){return t.name})).sort();(s=e.feesTypes).push.apply(s,t(d)),(u=e.paymentMethods).push.apply(u,t(i.payType)),(b=e.cardTypes).push.apply(b,t(i.cardType));var p=localStorage.getItem("PID");null!==p&&(localStorage.removeItem("PID"),e.setPatientID(parseInt(p)))}})}},{key:"searchPatients",value:function(e){var i=this;"Enter"===e.key&&""!==this.formGroup.get("search").value&&this.service.getPatientsList(this.formGroup.get("search").value).pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(e){var n;e.patients.length>0?((n=i.searchList).splice.apply(n,[0,i.searchList.length].concat(t(e.patients))),i.dialog.open(i.patientsTemplate)):i.toastr.info("No Patients Found","Empty Data")}})}},{key:"setPatientID",value:function(t){this.formGroup.get("ptId").patchValue(t.toString()),this.dialog.closeAll(),this.searchList.length=0,this.getPatientDetails()}},{key:"getPatientDetails",value:function(){var t=this,e=this.formGroup.get("ptId").value;""!==e&&this.service.getPatientDetails(e).pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(e){t.formGroup.patchValue({name:e.name,age:e.age,gender:e.gender,contact:e.contact,consultant:e.consultant})}})}},{key:"getFees",value:function(t){var e=this;if("Enter"===t.key){var i=this.formGroup.get("feesType").value,n=this.feesList.findIndex(function(t){return t.name===i}),o=n>-1?0:this.testList.findIndex(function(t){return t.name===i}),a=n>-1||o>-1?0:this.groupTestList.findIndex(function(t){return t.name===i}),r=n>-1||o>-1||a>-1?0:this.profilesList.findIndex(function(t){return t.name===i}),c="",l="";if(n>-1?c=this.feesList[n].department:o>-1?(c="Lab",l="Test"):a>-1?(c="Lab",l="GroupTest"):r>-1&&(c="Lab",l="Profile"),""!==c)if(this.formGroup.get("addedFees").controls.findIndex(function(t){return t.get("feesType").value===i})>-1)this.toastr.warning(i+" is already added");else{var s="",u=0;switch(l){case"":s="fees-cost",u=this.feesList[n].id;break;case"Test":s="test-cost",u=this.testList[o].id;break;case"GroupTest":s="group-test-cost",u=this.groupTestList[a].id;break;case"Profile":s="profile-cost",u=this.profilesList[r].id}this.service.getFees(s,u).pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(t){e.tempData.dept=c,e.tempData.feesId=u,e.tempData.testType=l,e.tempData.category=t.category,e.formGroup.controls.cost.patchValue(t.cost),e.renderer.selectRootElement(e.cost.nativeElement).focus()}})}}}},{key:"addFees",value:function(t){"Enter"===t.key&&null!==this.formGroup.get("cost").value&&""!==this.tempData.dept&&(this.formGroup.get("addedFees").push(this.fb.group({dept:[this.tempData.dept],category:[this.tempData.category],feesType:[this.formGroup.get("feesType").value],feesId:[this.tempData.feesId],cost:[this.formGroup.get("cost").value],testType:[this.tempData.testType],discount:[0]})),this.tempData.dept="",this.calculateTotal(),this.formGroup.patchValue({feesType:"",cost:null}),this.renderer.selectRootElement(this.feesType.nativeElement).focus())}},{key:"removeFees",value:function(t){this.formGroup.get("addedFees").removeAt(t),this.calculateTotal()}},{key:"getPayingType",value:function(){return"Others"!==this.formGroup.get("payType").value?this.formGroup.get("payType").value:this.formGroup.get("otherType").value}},{key:"saveBill",value:function(){var t=this;""==this.formGroup.get("ptId").value?this.toastr.info("Select the Patient ID"):""===this.formGroup.get("consultant").value?this.toastr.info("Select the Consultant Name"):0===this.formGroup.get("addedFees").controls.length?this.toastr.info("No Fees were Added!!!"):""===this.getPayingType()?this.toastr.info("Select / Enter Paying Type"):(this.ngxLoaderService.start(),this.service.saveBill(this.formGroup.getRawValue()).pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(e){e.status?(Swal.fire({title:e.message,text:"Bill No is "+e.bill_no,icon:"success",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Print the Bill",cancelButtonText:"Close",allowOutsideClick:!1}).then(function(i){i.isConfirmed&&t.common.printPage("op-bill/".concat(e.id,"/hospital"))}),t.resetPage()):t.toastr.error("An error occured while saving the Bill","Error")},complete:function(){return t.ngxLoaderService.stop()}}))}},{key:"view",value:function(){var e=this;this.editMode=!0,this.pidList=[],this.formGroup.get("addedFees").patchValue([]),this.service.getBillYears().pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(i){var n,o;(n=e.billYears).splice.apply(n,[0,e.billYears.length].concat(t(i.years))),(o=e.billNos).splice.apply(o,[0,e.billNos.length].concat(t(i.bill_nos))),i.years.length>0?e.formGroup.get("year").patchValue(i.years[0]):e.billNos.length=0}})}},{key:"getBillNos",value:function(){var e=this,i=this.formGroup.get("year").value;""===i?this.billNos.length=0:this.service.getBillNos(i).pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(i){var n;(n=e.billNos).splice.apply(n,[0,e.billNos.length].concat(t(i)))}})}},{key:"getBillDetails",value:function(){var t=this;""!==this.formGroup.get("year").value&&""!==this.formGroup.get("billNo").value&&this.service.getBillDetails(this.formGroup.get("billNo").value).pipe(Object(Q.a)(this.destroy$)).subscribe({next:function(e){t.formGroup.patchValue({oldPtId:e.data.pt_id,name:e.data.name,age:e.data.age,gender:e.data.gender,contact:e.data.contact,consultant:e.data.consultant,total:e.data.total,discount:e.data.discount,subTotal:e.data.sub_total,paying:e.data.paying,due:e.data.due,refund:e.data.refund,payType:e.data.pay_type,otherType:e.data.other_type,cardNo:e.data.card_no,cardType:e.data.card_type,cardExpiry:e.data.card_expiry}),t.formGroup.get("addedFees").controls.length=0,e.fees_data.forEach(function(e){t.formGroup.get("addedFees").push(t.fb.group({dept:[e.dept],category:[e.category],feesType:[e.fees_type],feesId:[e.fees_id],cost:[e.cost],testType:[e.test_type],discount:[e.discount]}))})}})}},{key:"updateBillDetails",value:function(){var t=this;this.editMode&&(""===this.formGroup.get("year").value?this.toastr.info("Select the Bill Year"):""===this.formGroup.get("billNo").value?this.toastr.info("Select the Bill No"):""===this.formGroup.get("consultant").value?this.toastr.info("Select the Consultant Name"):0===this.formGroup.get("addedFees").controls.length?this.toastr.info("No Fees were Added!!!"):""===this.getPayingType()?this.toastr.info("Select / Enter Paying Type"):(this.ngxLoaderService.start(),this.service.updateBillDetails(this.formGroup.get("billNo").value,this.formGroup.getRawValue()).toPromise().then(function(e){t.toastr.success(e)}).finally(function(){return t.ngxLoaderService.stop()})))}},{key:"deleteBill",value:function(){var t=this;this.editMode&&(""===this.formGroup.get("year").value?this.toastr.info("Select the Bill Year"):""===this.formGroup.get("billNo").value?this.toastr.info("Select the Bill No"):this.common.triggerSwal("Do you want to Delete the Bill?").then(function(e){e.isConfirmed&&(t.ngxLoaderService.start(),t.service.deleteBill(t.formGroup.get("billNo").value).toPromise().then(function(e){t.toastr.success(e),t.resetPage()}).finally(function(){return t.ngxLoaderService.stop()}))}))}},{key:"PrintBill",value:function(){""===this.formGroup.get("year").value?this.toastr.error("Select the Bill Year"):""===this.formGroup.get("billNo").value?this.toastr.error("Select the Bill No"):this.common.printPage("op-bill/".concat(this.formGroup.get("billNo").value,"/").concat(this.formGroup.get("billType").value))}},{key:"resetPage",value:function(){this.editMode=!1,this.formGroup.patchValue({oldPtId:"",search:"",ptId:"",pid:"0",name:"",age:"",gender:"Male",contact:"",consultant:"",feesType:"",cost:null,otherType:"",total:0,discount:0,subTotal:0,paying:0,due:0,refund:0,cardNo:"",cardType:"",cardExpiry:"",payType:"Cash",year:"",billNo:""}),this.formGroup.get("addedFees").controls.length=0,this.billYears.length=0,this.billNos.length=0,this.searchList.length=0,this.populateID()}},{key:"populateID",value:function(){var e=this;this.service.getIds().toPromise().then(function(i){var n;(n=e.pidList).splice.apply(n,[0,e.pidList.length].concat(t(i)))})}},{key:"showCardDialog",value:function(t){"Card"===t&&this.dialog.open(this.cardTemplate)}},{key:"calculateTotal",value:function(){var t=0,e=0;this.formGroup.get("addedFees").controls.forEach(function(i){t+=parseFloat(i.get("cost").value),e+=i.get("discount").value});var i=t-e;this.formGroup.patchValue({total:t.toFixed(2),discount:e.toFixed(2),subTotal:i.toFixed(2),paying:i.toFixed(2),due:0,refund:0})}},{key:"changePayingAmount",value:function(){var t,e,i=(null!==(t=this.formGroup.get("subTotal").value)&&void 0!==t?t:0)-(null!==(e=this.formGroup.get("paying").value)&&void 0!==e?e:0);0===i||i>0?(this.formGroup.get("due").patchValue(i),this.formGroup.get("refund").patchValue(0)):(this.formGroup.get("refund").patchValue(Math.abs(i)),this.formGroup.get("due").patchValue(0))}},{key:"addPayType",value:function(){var t=this,e=this.formGroup.get("otherType").value;""===e||this.paymentMethods.includes(e)||this.service.addPayType(e).toPromise().then(function(i){t.toastr.success(i),t.paymentMethods.push(e)},function(t){return console.log(t)})}},{key:"removePayType",value:function(){var t=this,e=this.formGroup.get("otherType").value;this.paymentMethods.includes(e)&&this.service.removePayType(e).toPromise().then(function(i){var n=t.paymentMethods.findIndex(function(t){return t===e});t.paymentMethods.splice(n,1),t.formGroup.get("otherType").patchValue(""),t.toastr.success(i)})}},{key:"addCardType",value:function(){var t=this,e=this.formGroup.get("cardType").value;""===e||this.cardTypes.includes(e)||this.service.addCardType(e).toPromise().then(function(i){t.toastr.success(i),t.cardTypes.push(e)})}},{key:"removeCardType",value:function(){var t=this,e=this.formGroup.get("cardType").value;this.cardTypes.includes(e)&&this.service.removeCardType(e).toPromise().then(function(i){var n=t.cardTypes.findIndex(function(t){return t===e});t.cardTypes.splice(n,1),t.formGroup.get("cardType").patchValue(""),t.toastr.success(i)})}},{key:"addedFees",get:function(){return this.formGroup.get("addedFees")}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"initProperties",value:function(){this.payTypes=["Cash","Card","Others"],this.searchList=[],this.pidList=[],this.consList=[],this.feesList=[],this.testList=[],this.groupTestList=[],this.profilesList=[],this.billYears=[],this.billNos=[],this.cardTypes=[],this.paymentMethods=[],this.feesTypes=[],this.editMode=!1,this.destroy$=new tt.a,this.formGroup=new h.j({oldPtId:new h.h({value:"",disabled:!0}),search:new h.h(""),ptId:new h.h(""),name:new h.h(""),age:new h.h(""),gender:new h.h("Male"),billType:new h.h("hospital"),contact:new h.h(""),consultant:new h.h(""),feesType:new h.h(""),cost:new h.h(null),otherType:new h.h(""),total:new h.h(0),discount:new h.h(0),subTotal:new h.h(0),paying:new h.h(0),due:new h.h(0),refund:new h.h(0),cardNo:new h.h(""),cardType:new h.h(""),cardExpiry:new h.h(""),payType:new h.h("Cash"),year:new h.h(""),billNo:new h.h(""),addedFees:new h.e([])}),this.tempData={dept:"",category:"",testType:"",billYear:"",billNo:null,cost:"0",feesId:null}}},{key:"autoCompleteFeesType",value:function(){var t=this;this.filteredFeesTypes$=this.formGroup.controls.feesType.valueChanges.pipe(Object(W.a)(500),Object(X.a)(""),Object(Z.a)(function(e){return""===e?[]:t.feesTypes.filter(function(t){return t.toLowerCase().startsWith(e.toLowerCase())})}))}}]),e}()).\u0275fac=function(t){return new(t||xt)(v.Ob(q),v.Ob(et.b),v.Ob(it.a),v.Ob(R.a),v.Ob(nt.b),v.Ob(v.G),v.Ob(h.g))},xt.\u0275cmp=v.Ib({type:xt,selectors:[["app-op-billing"]],viewQuery:function(t,e){var i;1&t&&(v.Nc(ot,1),v.Nc(at,1),v.Nc(rt,1),v.Nc(ct,1)),2&t&&(v.vc(i=v.dc())&&(e.cardTemplate=i.first),v.vc(i=v.dc())&&(e.patientsTemplate=i.first),v.vc(i=v.dc())&&(e.cost=i.first),v.vc(i=v.dc())&&(e.feesType=i.first))},features:[v.Bb([q])],decls:157,vars:26,consts:[[3,"formGroup"],[1,"container-fluid"],[1,"pl-2","pr-2","background-All"],[1,"row"],[1,"col"],[1,"ml-lg-2",2,"font-size","18px","font-weight","bold"],["class","row",4,"ngIf"],["class","row mt-2",4,"ngIf"],[1,"row","mt-2"],[1,"col-lg-1","col-md-1","col-sm-2","col-4"],[1,"badge"],[1,"col-lg-2","col-md-2","col-sm-3","col-8"],["class","form-control form-control-sm","formControlName","ptId",3,"change",4,"ngIf"],["class","form-control form-control-sm","disabled","",3,"value",4,"ngIf"],[1,"col-lg-3","col-md-3","col-sm-4","col-8","mt-lg-0","mt-1"],["disabled","",1,"form-control","form-control-sm",3,"value"],[1,"col-lg-1","col-md-1","col-sm-3","col-8","mt-lg-0","mt-1"],[1,"col-lg-2","col-md-2","col-sm-3","col-8","mt-lg-0","mt-1"],[1,"row","mt-lg-1"],["formControlName","consultant",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"font-size","18px","font-weight","bold"],[1,"col-lg-2"],["formControlName","billType",1,"form-control","form-control-sm"],["value","hospital"],["value","clinic"],[1,"col-lg-5","col-md-5","col-12"],[1,"col-lg-8","col-md-8","col-sm-5"],["appearance","outline"],["matInput","","formControlName","feesType",3,"matAutocomplete","keyup"],["feesType",""],["feesTypeAutoComplete","matAutocomplete"],[1,"col-lg-4","col-md-4","col-sm-3"],["matInput","","type","number","inputmode","numeric","formControlName","cost",3,"keyup"],["cost",""],[1,"col-lg-7","col-md-7","col-12","tabPanel","table-responsive"],[1,"table","table-bordered","table-hover","table-sm"],["formArrayName","addedFees",4,"ngFor","ngForOf"],[1,"col-lg-5","col-md-5","col-sm-5","col-12"],["formControlName","payType",3,"click"],["class","input-group",4,"ngIf"],[1,"col-lg-7","col-md-7","col-sm-7","col-12"],[1,"col-lg-2","col-md-3","col-4"],[1,"col-lg-2","col-md-3","col-8"],["readonly","",1,"form-control","form-control-sm",3,"value"],["type","number","inputmode","numeric","formControlName","paying",1,"form-control","form-control-sm",3,"keyup"],[1,"col-12"],[1,"text-center"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-info","btn-sm",3,"disabled","click"],[1,"btn","btn-danger","btn-sm",3,"disabled","click"],[1,"btn","btn-warning","btn-sm",3,"disabled","click"],[1,"btn","btn-primary","btn-sm",3,"click"],["cardTemplate",""],["patientsTemplate",""],[1,"col-lg-2","col-md-3","col-sm-4","col-6"],["formControlName","year",1,"form-control",3,"change"],["formControlName","billNo",1,"form-control",3,"change"],[3,"value"],[1,"col-lg-3","col-md-3","col-sm-5","col-12"],["type","search","placeholder","Search for Patients(Name,Mobile)","formControlName","search",1,"form-control","form-control-sm",3,"keyup"],["formControlName","ptId",1,"form-control","form-control-sm",3,"change"],["formArrayName","addedFees"],[3,"formGroupName"],["type","number","formControlName","discount",3,"keyup"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fa","fa-trash-alt"],[1,"input-group"],["matInput","","formControlName","otherType",3,"matAutocomplete"],["matSuffix","","mat-icon-button","","color","primary",3,"click"],[1,"material-icons"],["matSuffix","","mat-icon-button","","color","warn",3,"click"],["otherType","matAutocomplete"],[1,"modal-title","text-center",2,"width","100%"],[1,"green","font-weight-bold"],["matInput","","formControlName","cardNo","autocomplete","off"],["matInput","","formControlName","cardType",3,"matAutocomplete"],["type","date","matInput","","formControlName","cardExpiry","autocomplete","off"],[1,"row","text-center"],["mat-dialog-close","",1,"btn","btn-primary"],[1,"table-responsive",2,"max-height","200px"],["id","tblPatientList",1,"table","table-bordered","table-sm"],[4,"ngFor","ngForOf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-location-arrow"]],template:function(t,e){if(1&t&&(v.Ub(0,"div",0),v.Ub(1,"div",1),v.Ub(2,"div",2),v.Ub(3,"div",3),v.Ub(4,"div",4),v.Ub(5,"label",5),v.Jc(6,"\xa0Patient Details"),v.Tb(),v.Tb(),v.Tb(),v.Hc(7,ut,15,2,"div",6),v.Hc(8,bt,3,0,"div",7),v.Ub(9,"div",8),v.Ub(10,"div",9),v.Ub(11,"label",10),v.Jc(12,"Patient ID/UHID"),v.Tb(),v.Tb(),v.Ub(13,"div",11),v.Hc(14,pt,4,1,"select",12),v.Hc(15,ht,1,1,"input",13),v.Tb(),v.Ub(16,"div",9),v.Ub(17,"label",10),v.Jc(18," Patient Name"),v.Tb(),v.Tb(),v.Ub(19,"div",14),v.Pb(20,"input",15),v.Tb(),v.Ub(21,"div",9),v.Ub(22,"label",10),v.Jc(23," Age"),v.Tb(),v.Tb(),v.Ub(24,"div",16),v.Pb(25,"input",15),v.Tb(),v.Ub(26,"div",9),v.Ub(27,"label",10),v.Jc(28," Gender"),v.Tb(),v.Tb(),v.Ub(29,"div",17),v.Pb(30,"input",15),v.Tb(),v.Tb(),v.Ub(31,"div",18),v.Ub(32,"div",9),v.Ub(33,"label",10),v.Jc(34,"Phone No"),v.Tb(),v.Tb(),v.Ub(35,"div",17),v.Pb(36,"input",15),v.Tb(),v.Ub(37,"div",9),v.Ub(38,"label",10),v.Jc(39," Consultant"),v.Tb(),v.Tb(),v.Ub(40,"div",14),v.Ub(41,"select",19),v.Ub(42,"option",20),v.Jc(43,"Select"),v.Tb(),v.Hc(44,ft,2,2,"option",21),v.Tb(),v.Tb(),v.Tb(),v.Pb(45,"br"),v.Tb(),v.Pb(46,"hr"),v.Ub(47,"div",2),v.Ub(48,"div",3),v.Ub(49,"div",4),v.Ub(50,"label",22),v.Jc(51,"\xa0Bill Details"),v.Tb(),v.Tb(),v.Tb(),v.Pb(52,"hr"),v.Ub(53,"div",3),v.Ub(54,"div",23),v.Ub(55,"label",22),v.Jc(56,"\xa0Select Bill type "),v.Tb(),v.Tb(),v.Ub(57,"div",14),v.Ub(58,"select",24),v.Ub(59,"option",25),v.Jc(60,"Hospital"),v.Tb(),v.Ub(61,"option",26),v.Jc(62,"Clinic"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Pb(63,"hr"),v.Ub(64,"div",3),v.Ub(65,"div",27),v.Ub(66,"div",3),v.Ub(67,"div",28),v.Ub(68,"mat-form-field",29),v.Ub(69,"mat-label"),v.Jc(70,"Fees Type"),v.Tb(),v.Ub(71,"input",30,31),v.cc("keyup",function(t){return e.getFees(t)}),v.Tb(),v.Ub(73,"mat-autocomplete",null,32),v.Hc(75,mt,2,2,"mat-option",21),v.hc(76,"async"),v.Tb(),v.Tb(),v.Tb(),v.Ub(77,"div",33),v.Ub(78,"mat-form-field",29),v.Ub(79,"mat-label"),v.Jc(80,"Cost"),v.Tb(),v.Ub(81,"input",34,35),v.cc("keyup",function(t){return e.addFees(t)}),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(83,"div",36),v.Ub(84,"table",37),v.Ub(85,"thead"),v.Ub(86,"tr"),v.Ub(87,"th"),v.Jc(88," Category "),v.Tb(),v.Ub(89,"th"),v.Jc(90," Fees Type "),v.Tb(),v.Ub(91,"th"),v.Jc(92," Fees "),v.Tb(),v.Ub(93,"th"),v.Jc(94," Discount "),v.Tb(),v.Pb(95,"th"),v.Tb(),v.Tb(),v.Ub(96,"tbody"),v.Hc(97,gt,14,7,"ng-container",38),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(98,"div",8),v.Ub(99,"div",39),v.Ub(100,"div"),v.Ub(101,"label",10),v.Jc(102," Paying Type :"),v.Tb(),v.Tb(),v.Ub(103,"mat-radio-group",40),v.cc("click",function(t){return e.showCardDialog(t.target.innerText)}),v.Hc(104,vt,2,2,"mat-radio-button",21),v.Tb(),v.Hc(105,Tt,14,2,"div",41),v.Tb(),v.Ub(106,"div",42),v.Ub(107,"div",3),v.Ub(108,"div",43),v.Ub(109,"label",10),v.Jc(110,"Total Amount"),v.Tb(),v.Tb(),v.Ub(111,"div",44),v.Pb(112,"input",45),v.Tb(),v.Ub(113,"div",43),v.Ub(114,"label",10),v.Jc(115,"Discount"),v.Tb(),v.Tb(),v.Ub(116,"div",44),v.Pb(117,"input",45),v.Tb(),v.Ub(118,"div",43),v.Ub(119,"label",10),v.Jc(120,"Sub Total"),v.Tb(),v.Tb(),v.Ub(121,"div",44),v.Pb(122,"input",45),v.Tb(),v.Ub(123,"div",43),v.Ub(124,"label",10),v.Jc(125,"Paid Amount"),v.Tb(),v.Tb(),v.Ub(126,"div",44),v.Ub(127,"input",46),v.cc("keyup",function(){return e.changePayingAmount()}),v.Tb(),v.Tb(),v.Ub(128,"div",43),v.Ub(129,"label",10),v.Jc(130,"Due Amount"),v.Tb(),v.Tb(),v.Ub(131,"div",44),v.Pb(132,"input",45),v.Tb(),v.Ub(133,"div",43),v.Ub(134,"label",10),v.Jc(135,"Refund Amount"),v.Tb(),v.Tb(),v.Ub(136,"div",44),v.Pb(137,"input",45),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(138,"div",8),v.Ub(139,"div",47),v.Ub(140,"div",48),v.Ub(141,"button",49),v.cc("click",function(){return e.saveBill()}),v.Jc(142,"Save"),v.Tb(),v.Ub(143,"button",50),v.cc("click",function(){return e.view()}),v.Jc(144,"View"),v.Tb(),v.Ub(145,"button",51),v.cc("click",function(){return e.updateBillDetails()}),v.Jc(146,"Update"),v.Tb(),v.Ub(147,"button",52),v.cc("click",function(){return e.deleteBill()}),v.Jc(148,"Delete"),v.Tb(),v.Ub(149,"button",53),v.cc("click",function(){return e.PrintBill()}),v.Jc(150,"Print"),v.Tb(),v.Ub(151,"button",54),v.cc("click",function(){return e.resetPage()}),v.Jc(152,"Clear"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Hc(153,Ct,31,2,"ng-template",null,55,v.Ic),v.Hc(155,Pt,20,1,"ng-template",null,56,v.Ic),v.Tb()),2&t){var i=v.wc(74);v.oc("formGroup",e.formGroup),v.Cb(7),v.oc("ngIf",e.editMode),v.Cb(1),v.oc("ngIf",!e.editMode),v.Cb(6),v.oc("ngIf",!e.editMode),v.Cb(1),v.oc("ngIf",e.editMode),v.Cb(5),v.pc("value",e.formGroup.get("name").value),v.Cb(5),v.pc("value",e.formGroup.get("age").value),v.Cb(5),v.pc("value",e.formGroup.get("gender").value),v.Cb(6),v.pc("value",e.formGroup.get("contact").value),v.Cb(8),v.oc("ngForOf",e.consList),v.Cb(27),v.oc("matAutocomplete",i),v.Cb(4),v.oc("ngForOf",v.ic(76,24,e.filteredFeesTypes$)),v.Cb(22),v.oc("ngForOf",e.addedFees.controls),v.Cb(7),v.oc("ngForOf",e.payTypes),v.Cb(1),v.oc("ngIf","Others"===e.formGroup.get("payType").value),v.Cb(7),v.oc("value",e.formGroup.get("total").value),v.Cb(5),v.oc("value",e.formGroup.get("discount").value),v.Cb(5),v.oc("value",e.formGroup.get("subTotal").value),v.Cb(10),v.oc("value",e.formGroup.get("due").value),v.Cb(5),v.oc("value",e.formGroup.get("refund").value),v.Cb(4),v.oc("disabled",e.editMode),v.Cb(4),v.oc("disabled",!e.editMode),v.Cb(2),v.oc("disabled",!e.editMode),v.Cb(2),v.oc("disabled",!e.editMode)}},directives:[h.s,h.k,f.n,h.y,h.r,h.i,h.v,h.B,f.m,V.c,V.f,z.b,h.d,E.c,E.a,h.w,G,y.j,h.f,h.l,B,g.b,V.g,R.b],pipes:[f.b,f.g],styles:[".table[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.1rem;padding-bottom:.1rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.tabPanel[_ngcontent-%COMP%]{max-height:150px}.green[_ngcontent-%COMP%]{color:#1a6724;text-shadow:0 0 1px #b72828;font-style:oblique}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem}.badge[_ngcontent-%COMP%]{text-align:left}.mat-radio-label-content[_ngcontent-%COMP%]{padding-right:3px}.mat-option[_ngcontent-%COMP%]{height:30px;line-height:30px}.mat-option[_ngcontent-%COMP%], .mat-option-text[_ngcontent-%COMP%]{font-size:13px}"]}),xt),_t=function(){var t=function(){function t(e){s(this,t),this.http=e,this.cardTypes=[],this.payTypes=[],this.selectedDate="",this.currentUrl=j.a.normUrl+"cash-counter/ip-billing"}return l(t,[{key:"LoadFunctions",value:function(){var t=this;setTimeout(function(){$("#txtCardType").autocomplete({source:function(e,i){return i(t.cardTypes.filter(function(t){return t.toLowerCase().startsWith(e.term.toLowerCase())}))},appendTo:$("#cardDialog")}),$("#txtOthers").autocomplete({source:function(e,i){return i(t.payTypes.filter(function(t){return t.toLowerCase().startsWith(e.term.toLowerCase())}))}})},0)}},{key:"getAll",value:function(){return this.http.get(this.currentUrl)}},{key:"getIPNos",value:function(t){return this.http.get("".concat(this.currentUrl,"/ip-nos/").concat(t))}},{key:"getTreatmentDetails",value:function(t){return this.http.get("".concat(this.currentUrl,"/treatments/").concat(t))}},{key:"saveBill",value:function(t,e){return this.http.post(this.currentUrl,{data:t,treatments:e})}},{key:"getBillNos",value:function(t){return this.http.get("".concat(this.currentUrl,"/bill-nos/").concat(t))}},{key:"getBillDetails",value:function(t){return this.http.get("".concat(this.currentUrl,"/bill-details/").concat(t))}},{key:"updateBill",value:function(t,e){return this.http.patch("".concat(this.currentUrl,"/").concat(t.billNo),{data:t,treatments:e},{responseType:"text"})}},{key:"deleteBill",value:function(t){return this.http.delete("".concat(this.currentUrl,"/").concat(t),{responseType:"text"})}},{key:"GetInputs",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(v.Yb(Y.b))},t.\u0275prov=v.Kb({token:t,factory:t.\u0275fac}),t}(),Nt=["cardTemplate"];function Jt(t,e){if(1&t&&v.Pb(0,"option",47),2&t){var i=e.$implicit;v.oc("value",i)("text",i)}}function It(t,e){if(1&t){var i=v.Vb();v.Ub(0,"select",44),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.billYear=t})("change",function(){return v.zc(i),v.gc().getBillNos()}),v.Ub(1,"option",45),v.Jc(2,"Select"),v.Tb(),v.Hc(3,Jt,1,2,"option",46),v.Tb()}if(2&t){var n=v.gc();v.oc("ngModel",n.inputs.billYear),v.Cb(3),v.oc("ngForOf",n.years)}}function Mt(t,e){if(1&t&&v.Pb(0,"option",47),2&t){var i=e.$implicit;v.oc("value",i)("text",i)}}function Ot(t,e){if(1&t){var i=v.Vb();v.Ub(0,"select",44),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.year=t})("change",function(){return v.zc(i),v.gc().getIPNos()}),v.Ub(1,"option",45),v.Jc(2,"Select"),v.Tb(),v.Hc(3,Mt,1,2,"option",46),v.Tb()}if(2&t){var n=v.gc();v.oc("ngModel",n.inputs.year),v.Cb(3),v.oc("ngForOf",n.years)}}function Gt(t,e){if(1&t&&v.Pb(0,"option",47),2&t){var i=e.$implicit;v.oc("value",i.id)("text",i.billNo)}}function Dt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"select",44),v.cc("ngModelChange",function(t){return v.zc(i),v.gc(2).inputs.billNo=t})("change",function(){return v.zc(i),v.gc(2).getBillDetails()}),v.Ub(1,"option",45),v.Jc(2,"Select"),v.Tb(),v.Hc(3,Gt,1,2,"option",46),v.Tb()}if(2&t){var n=v.gc(2);v.oc("ngModel",n.inputs.billNo),v.Cb(3),v.oc("ngForOf",n.billNos)}}function At(t,e){if(1&t&&(v.Ub(0,"div",5),v.Ub(1,"label",6),v.Jc(2,"Bill No"),v.Tb(),v.Hc(3,Dt,4,2,"select",7),v.Tb()),2&t){var i=v.gc();v.Cb(3),v.oc("ngIf",i.editMode)}}function Ft(t,e){if(1&t&&v.Pb(0,"input",10),2&t){var i=v.gc();v.oc("value",i.inputs.tIP)}}function St(t,e){if(1&t&&v.Pb(0,"option",47),2&t){var i=e.$implicit;v.oc("value",i.id)("text",i.ipNo)}}function Bt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"select",44),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.ipNo=t})("change",function(){return v.zc(i),v.gc().getTreatmentDetails()}),v.Ub(1,"option",45),v.Jc(2,"Select"),v.Tb(),v.Hc(3,St,1,2,"option",46),v.Tb()}if(2&t){var n=v.gc();v.oc("ngModel",n.inputs.ipNo),v.Cb(3),v.oc("ngForOf",n.ipNos)}}function Lt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"tr"),v.Ub(1,"td"),v.Jc(2),v.Tb(),v.Ub(3,"td"),v.Jc(4),v.Tb(),v.Ub(5,"td"),v.Jc(6),v.Tb(),v.Ub(7,"td"),v.Jc(8),v.hc(9,"number"),v.Tb(),v.Ub(10,"td"),v.Jc(11),v.Tb(),v.Ub(12,"td"),v.Jc(13),v.hc(14,"number"),v.Tb(),v.Ub(15,"td"),v.Ub(16,"input",48),v.cc("ngModelChange",function(t){return e.$implicit.discount=t})("input",function(){return v.zc(i),v.gc().calculateTotal()}),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=e.$implicit;v.Cb(2),v.Kc(n.dept),v.Cb(2),v.Kc(n.category),v.Cb(2),v.Kc(n.service),v.Cb(2),v.Kc(v.jc(9,7,n.cost,"1.2-2")),v.Cb(3),v.Kc(n.qty),v.Cb(2),v.Kc(v.jc(14,10,n.total,"1.2-2")),v.Cb(3),v.oc("ngModel",n.discount)}}function Rt(t,e){if(1&t&&(v.Ub(0,"mat-radio-button",49),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Kc(i)}}function Et(t,e){if(1&t&&(v.Ub(0,"mat-option",49),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Lc(" ",i," ")}}function Vt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"mat-form-field"),v.Ub(1,"mat-label"),v.Jc(2,"Other Payment"),v.Tb(),v.Ub(3,"input",50),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.otherType=t}),v.Tb(),v.Ub(4,"mat-autocomplete",null,51),v.Hc(6,Et,2,2,"mat-option",29),v.Tb(),v.Tb()}if(2&t){var n=v.wc(5),o=v.gc();v.Cb(3),v.oc("matAutocomplete",n)("ngModel",o.inputs.otherType),v.Cb(3),v.oc("ngForOf",o.paymentModes)}}function $t(t,e){if(1&t&&(v.Ub(0,"mat-option",49),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Kc(i)}}function zt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"div",52),v.Ub(1,"h4",53),v.Jc(2,"Card Details"),v.Tb(),v.Tb(),v.Ub(3,"div",1),v.Ub(4,"mat-form-field"),v.Ub(5,"mat-label"),v.Jc(6,"Card No"),v.Tb(),v.Ub(7,"input",54),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.cardNo=t}),v.Tb(),v.Tb(),v.Tb(),v.Ub(8,"div",1),v.Ub(9,"mat-form-field"),v.Ub(10,"mat-label"),v.Jc(11,"Card Type"),v.Tb(),v.Ub(12,"input",55),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.cardType=t}),v.Tb(),v.Ub(13,"mat-autocomplete",null,56),v.Hc(15,$t,2,2,"mat-option",29),v.Tb(),v.Tb(),v.Tb(),v.Ub(16,"div",1),v.Ub(17,"mat-form-field"),v.Ub(18,"mat-label"),v.Jc(19,"Card Expiry"),v.Tb(),v.Ub(20,"input",57),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.cardExpiry=t}),v.Tb(),v.Tb(),v.Tb(),v.Ub(21,"div",58),v.Ub(22,"div",2),v.Ub(23,"button",59),v.Jc(24,"Close"),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=v.wc(14),o=v.gc();v.Cb(7),v.oc("ngModel",o.inputs.cardNo),v.Cb(5),v.oc("ngModel",o.inputs.cardType)("matAutocomplete",n),v.Cb(3),v.oc("ngForOf",o.cardTypes),v.Cb(5),v.oc("ngModel",o.inputs.cardExpiry)}}var Ht,jt,Yt=((jt=function(){function e(t,i,n,o,a){s(this,e),this.service=t,this.toastr=i,this.common=n,this.dialog=o,this.loaderService=a,this.billType="hospital"}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.common.mainData.next({header:"IP Billing",treeView:"liCashCounter",subTreeView:"",menu:"liIPBill"}),this.service.LoadFunctions(),this.initProperties(),this.service.getAll().toPromise().then(function(i){var n,o,a,r;(n=e.years).push.apply(n,t(i.years)),i.years.length>0&&(e.inputs.year=i.years[0]),(o=e.ipNos).push.apply(o,t(i.ipNos)),(a=e.paymentModes).push.apply(a,t(i.payTypes)),(r=e.cardTypes).push.apply(r,t(i.cardTypes))})}},{key:"getIPNos",value:function(){var e=this;""!==this.inputs.year?this.service.getIPNos(this.inputs.year).toPromise().then(function(i){var n;return(n=e.ipNos).splice.apply(n,[0,e.ipNos.length].concat(t(i)))}):this.ipNos.splice(0,this.ipNos.length)}},{key:"getTreatmentDetails",value:function(){var e=this;""!==this.inputs.year&&""!==this.inputs.ipNo&&this.service.getTreatmentDetails(this.inputs.ipNo).toPromise().then(function(i){var n;for(var o in i.data)e.inputs[o]=i.data[o];(n=e.treatments).splice.apply(n,[0,e.treatments.length].concat(t(i.treatments))),e.calculateTotal()})}},{key:"saveBill",value:function(){var t=this;""===this.inputs.year?this.toastr.error("Select the Year to Save"):""===this.inputs.ipNo?this.toastr.error("Select the IP No to Save"):""===this.getPayType()?this.toastr.error("Enter the Pay Type to Save"):this.inputs.subTotal<0?this.toastr.error("Advance / Discount is Greater than Total Amount!!!"):(this.loaderService.start(),this.service.saveBill(this.inputs,this.treatments).toPromise().then(function(e){t.ClearPage(),t.common.triggerSwal(e.message,"Print Bill","Success","success","#2fb926").then(function(i){i.isConfirmed&&t.common.printPage("ip-bill/".concat(e.billId))})}).finally(function(){return t.loaderService.stop()}))}},{key:"view",value:function(){this.editMode=!0,this.inputs.billNo="",this.years.length>0&&(this.inputs.billYear=this.years[0],this.getBillNos())}},{key:"getBillNos",value:function(){var e=this;""!==this.inputs.billYear?this.service.getBillNos(this.inputs.billYear).toPromise().then(function(i){var n;return(n=e.billNos).splice.apply(n,[0,e.billNos.length].concat(t(i)))}):this.billNos.splice(0,this.billNos.length)}},{key:"getBillDetails",value:function(){var t=this;""!==this.inputs.billYear&&""!==this.inputs.billNo&&this.service.getBillDetails(this.inputs.billNo).toPromise().then(function(e){for(var i in e.data)t.inputs[i]=e.data[i];t.treatments=e.treatments})}},{key:"updateBill",value:function(){var t=this;""===this.inputs.billYear?this.toastr.error("Select the Bill Year"):""===this.inputs.billNo?this.toastr.error("Select the Bill No"):""===this.getPayType()?this.toastr.error("Enter the Pay Type to Save"):this.inputs.subTotal<0?this.toastr.error("Advance / Discount is Greater than Total Amount!!!"):(this.loaderService.start(),this.service.updateBill(this.inputs,this.treatments).toPromise().then(function(e){return t.toastr.success(e)}).finally(function(){return t.loaderService.stop()}))}},{key:"deleteBill",value:function(){var t=this;""===this.inputs.billYear?this.toastr.error("Select the Bill Year"):""===this.inputs.billNo?this.toastr.error("Select the Bill No"):this.common.triggerSwal("Do you want to Delete this Bill?").then(function(e){e.isConfirmed&&(t.loaderService.start(),t.service.deleteBill(t.inputs.billNo).toPromise().then(function(e){t.toastr.success(e),t.ClearPage()}).finally(function(){return t.loaderService.stop()}))})}},{key:"PrintBill",value:function(){""===this.inputs.billYear?this.toastr.error("Select the Bill Year"):""===this.inputs.billNo?this.toastr.error("Select the Bill No"):this.common.printPage("ip-bill/".concat(this.inputs.billNo,"/").concat(this.billType))}},{key:"ClearPage",value:function(){for(var t in this.editMode=!1,this.service.selectedDate="",this.inputs)this.inputs[t]="number"==typeof this.inputs[t]?0:"";this.treatments=[],this.inputs.payType="Cash",this.years.length>0&&(this.inputs.year=this.years[0],this.getIPNos())}},{key:"showCardDialog",value:function(t){"Card"===t&&this.dialog.open(this.cardTemplate)}},{key:"getPayType",value:function(){return"Others"!==this.inputs.payType?this.inputs.payType:this.inputs.otherType}},{key:"calculateTotal",value:function(){var t=0,e=0;this.treatments.forEach(function(i){t+=i.total,e+=i.discount}),this.inputs.total=t,this.inputs.discount=e,this.inputs.subTotal=this.inputs.paying=t-(e+this.inputs.advance),this.inputs.due=0,this.inputs.refund=0}},{key:"ChangePayingAmt",value:function(){var t,e;this.inputs.due=(null!==(t=this.inputs.subTotal)&&void 0!==t?t:0)-(null!==(e=this.inputs.paying)&&void 0!==e?e:0),0===this.inputs.due||this.inputs.due>0?this.inputs.refund=0:(this.inputs.refund=Math.abs(this.inputs.due),this.inputs.due=0)}},{key:"initProperties",value:function(){this.years=[],this.ipNos=[],this.billNos=[],this.treatments=[],this.inputs={year:"",ipNo:"",billYear:"",billNo:"",tIP:0,ptId:0,name:"",age:"",gender:"",consultant:"",total:0,advance:0,discount:0,subTotal:0,paying:0,due:0,refund:0,payType:"Cash",otherType:"",cardNo:"",cardType:"",cardExpiry:""},this.editMode=!1,this.payTypes=["Cash","Card","Others"],this.paymentModes=[],this.cardTypes=[]}},{key:"ngOnDestroy",value:function(){$("#txtCardType").hasClass("ui-autocomplete-input")&&$("#txtCardType").autocomplete("destroy"),$("#txtOthers").hasClass("ui-autocomplete-input")&&$("#txtOthers").autocomplete("destroy"),$("#cardDialog").parents("ui-dialog").length>0&&$("#cardDialog").dialog("destroy")}}]),e}()).\u0275fac=function(t){return new(t||jt)(v.Ob(_t),v.Ob(et.b),v.Ob(it.a),v.Ob(R.a),v.Ob(nt.b))},jt.\u0275cmp=v.Ib({type:jt,selectors:[["app-ip-billing"]],viewQuery:function(t,e){var i;1&t&&v.Nc(Nt,1),2&t&&v.vc(i=v.dc())&&(e.cardTemplate=i.first)},features:[v.Bb([_t])],decls:140,vars:26,consts:[[1,"background-All"],[1,"row"],[1,"col"],[2,"font-size","18px","font-weight","bold"],[2,"margin-top","0px"],[1,"col-lg-2","col-md-2","col-sm-3","col-6"],[1,"badge"],["class","form-control form-control-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","col-lg-2 col-md-2 col-sm-3 col-6",4,"ngIf"],["class","form-control form-control-sm","readonly","",3,"value",4,"ngIf"],["readonly","",1,"form-control","form-control-sm",3,"value"],[1,"row","mt-lg-1"],[1,"col-lg-3","col-md-4","col-sm-6","col-8"],["readonly","",1,"form-control","form-control-sm","input",3,"value"],[1,"col-lg-2","col-md-2","col-sm-4","col-4"],[1,"col-lg-2","col-md-2","col-sm-6","col-4"],[1,"mt-2","background-All"],[1,"col-lg-2"],[1,"col-lg-3","col-md-3","col-sm-4","col-8","mt-lg-0","mt-1"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","hospital"],["value","clinic"],[1,"col-lg-8","col-12"],[1,"table-responsive","border",2,"min-height","150px","max-height","150px"],["id","tblTreatment",1,"table","table-bordered","table-hover","table-sm","table-striped","table-dark"],[1,"text-info"],[4,"ngFor","ngForOf"],[1,"col-lg-4","border","pb-2","mb-2"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-lg-2","col-md-3","col-sm-3","col-4"],[1,"col-lg-2","col-md-3","col-sm-3","col-8"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","input"],[1,"row","mt-2"],[1,"col-xs-12","col-lg-8","col-12"],[1,"text-center"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-info","btn-sm",3,"disabled","click"],[1,"btn","btn-danger","btn-sm",3,"disabled","click"],[1,"btn","btn-warning","btn-sm",3,"disabled","click"],[1,"btn","btn-primary","btn-sm",3,"click"],["cardTemplate",""],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["type","number","inputmode","numeric",3,"ngModel","ngModelChange","input"],[3,"value"],["matInput","",3,"matAutocomplete","ngModel","ngModelChange"],["paymentAutoComplete","matAutocomplete"],[1,"modal-title","text-center",2,"width","100%"],[1,"green","font-weight-bold"],["matInput","",3,"ngModel","ngModelChange"],["matInput","",3,"ngModel","matAutocomplete","ngModelChange"],["cardType","matAutocomplete"],["matInput","","type","date","autocomplete","off",3,"ngModel","ngModelChange"],[1,"row","text-center","mt-2"],["mat-dialog-close","",1,"btn","btn-primary"]],template:function(t,e){1&t&&(v.Ub(0,"div",0),v.Ub(1,"div",1),v.Ub(2,"div",2),v.Ub(3,"label",3),v.Jc(4,"\xa0Patient Details"),v.Tb(),v.Tb(),v.Tb(),v.Pb(5,"hr",4),v.Ub(6,"div",1),v.Ub(7,"div",5),v.Ub(8,"label",6),v.Jc(9,"Bill Year"),v.Tb(),v.Hc(10,It,4,2,"select",7),v.Hc(11,Ot,4,2,"select",7),v.Tb(),v.Hc(12,At,4,1,"div",8),v.Ub(13,"div",5),v.Ub(14,"label",6),v.Jc(15,"IP No"),v.Tb(),v.Hc(16,Ft,1,1,"input",9),v.Hc(17,Bt,4,2,"select",7),v.Tb(),v.Ub(18,"div",5),v.Ub(19,"label",6),v.Jc(20,"Patient ID / UHID"),v.Tb(),v.Pb(21,"input",10),v.Tb(),v.Tb(),v.Ub(22,"div",11),v.Ub(23,"div",12),v.Ub(24,"label",6),v.Jc(25,"Patient Name"),v.Tb(),v.Pb(26,"input",13),v.Tb(),v.Ub(27,"div",14),v.Ub(28,"label",6),v.Jc(29,"Age"),v.Tb(),v.Pb(30,"input",13),v.Tb(),v.Ub(31,"div",15),v.Ub(32,"label",6),v.Jc(33,"Gender"),v.Tb(),v.Pb(34,"input",13),v.Tb(),v.Ub(35,"div",12),v.Ub(36,"label",6),v.Jc(37,"Consultant"),v.Tb(),v.Pb(38,"input",13),v.Tb(),v.Tb(),v.Pb(39,"br"),v.Tb(),v.Ub(40,"div",16),v.Ub(41,"div",1),v.Ub(42,"div",2),v.Ub(43,"label",3),v.Jc(44,"\xa0Bill Details"),v.Tb(),v.Tb(),v.Tb(),v.Pb(45,"hr"),v.Ub(46,"div",1),v.Ub(47,"div",17),v.Ub(48,"label",3),v.Jc(49,"\xa0Select Bill type "),v.Tb(),v.Tb(),v.Ub(50,"div",18),v.Ub(51,"select",19),v.cc("ngModelChange",function(t){return e.billType=t}),v.Ub(52,"option",20),v.Jc(53,"Hospital"),v.Tb(),v.Ub(54,"option",21),v.Jc(55,"Clinic"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Pb(56,"hr",4),v.Ub(57,"div",1),v.Ub(58,"div",22),v.Ub(59,"div",23),v.Ub(60,"table",24),v.Ub(61,"thead"),v.Ub(62,"tr",25),v.Ub(63,"th"),v.Jc(64,"Department"),v.Tb(),v.Ub(65,"th"),v.Jc(66,"Category"),v.Tb(),v.Ub(67,"th"),v.Jc(68,"Service"),v.Tb(),v.Ub(69,"th"),v.Jc(70,"Cost"),v.Tb(),v.Ub(71,"th"),v.Jc(72,"Qty"),v.Tb(),v.Ub(73,"th"),v.Jc(74,"Total"),v.Tb(),v.Ub(75,"th"),v.Jc(76,"Discount"),v.Tb(),v.Tb(),v.Tb(),v.Ub(77,"tbody"),v.Hc(78,Lt,17,13,"tr",26),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(79,"div",27),v.Ub(80,"div"),v.Ub(81,"label",6),v.Jc(82,"Paying Type :"),v.Tb(),v.Tb(),v.Ub(83,"mat-radio-group",28),v.cc("ngModelChange",function(t){return e.inputs.payType=t})("click",function(t){return e.showCardDialog(t.target.innerText)}),v.Hc(84,Rt,2,2,"mat-radio-button",29),v.Tb(),v.Ub(85,"div"),v.Hc(86,Vt,7,3,"mat-form-field",30),v.Tb(),v.Tb(),v.Tb(),v.Ub(87,"div",1),v.Ub(88,"div",31),v.Ub(89,"label",6),v.Jc(90,"Total Amount"),v.Tb(),v.Tb(),v.Ub(91,"div",32),v.Pb(92,"input",10),v.Tb(),v.Ub(93,"div",31),v.Ub(94,"label",6),v.Jc(95,"Advance Paid"),v.Tb(),v.Tb(),v.Ub(96,"div",32),v.Pb(97,"input",10),v.Tb(),v.Ub(98,"div",31),v.Ub(99,"label",6),v.Jc(100,"Discount"),v.Tb(),v.Tb(),v.Ub(101,"div",32),v.Pb(102,"input",10),v.Tb(),v.Ub(103,"div",31),v.Ub(104,"label",6),v.Jc(105,"Sub Total"),v.Tb(),v.Tb(),v.Ub(106,"div",32),v.Pb(107,"input",10),v.Tb(),v.Ub(108,"div",31),v.Ub(109,"label",6),v.Jc(110,"Paying Amount"),v.Tb(),v.Tb(),v.Ub(111,"div",32),v.Ub(112,"input",33),v.cc("ngModelChange",function(t){return e.inputs.paying=t})("input",function(){return e.ChangePayingAmt()}),v.Tb(),v.Tb(),v.Ub(113,"div",31),v.Ub(114,"label",6),v.Jc(115,"Due Amount"),v.Tb(),v.Tb(),v.Ub(116,"div",32),v.Pb(117,"input",10),v.Tb(),v.Ub(118,"div",31),v.Ub(119,"label",6),v.Jc(120,"Refund Amount"),v.Tb(),v.Tb(),v.Ub(121,"div",32),v.Pb(122,"input",10),v.Tb(),v.Tb(),v.Ub(123,"div",34),v.Ub(124,"div",35),v.Ub(125,"div",36),v.Ub(126,"button",37),v.cc("click",function(){return e.saveBill()}),v.Jc(127,"Save"),v.Tb(),v.Ub(128,"button",38),v.cc("click",function(){return e.view()}),v.Jc(129,"View"),v.Tb(),v.Ub(130,"button",39),v.cc("click",function(){return e.updateBill()}),v.Jc(131,"Update"),v.Tb(),v.Ub(132,"button",40),v.cc("click",function(){return e.deleteBill()}),v.Jc(133,"Delete"),v.Tb(),v.Ub(134,"button",41),v.cc("click",function(){return e.PrintBill()}),v.Jc(135,"Print"),v.Tb(),v.Ub(136,"button",42),v.cc("click",function(){return e.ClearPage()}),v.Jc(137,"Clear"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Hc(138,zt,25,5,"ng-template",null,43,v.Ic)),2&t&&(v.Cb(10),v.oc("ngIf",e.editMode),v.Cb(1),v.oc("ngIf",!e.editMode),v.Cb(1),v.oc("ngIf",e.editMode),v.Cb(4),v.oc("ngIf",e.editMode),v.Cb(1),v.oc("ngIf",!e.editMode),v.Cb(4),v.oc("value",e.inputs.ptId),v.Cb(5),v.oc("value",e.inputs.name),v.Cb(4),v.oc("value",e.inputs.age),v.Cb(4),v.oc("value",e.inputs.gender),v.Cb(4),v.oc("value",e.inputs.consultant),v.Cb(13),v.oc("ngModel",e.billType),v.Cb(27),v.oc("ngForOf",e.treatments),v.Cb(5),v.oc("ngModel",e.inputs.payType),v.Cb(1),v.oc("ngForOf",e.payTypes),v.Cb(2),v.oc("ngIf","Others"===e.inputs.payType),v.Cb(6),v.oc("value",e.inputs.total),v.Cb(5),v.oc("value",e.inputs.advance),v.Cb(5),v.oc("value",e.inputs.discount),v.Cb(5),v.oc("value",e.inputs.subTotal),v.Cb(5),v.oc("ngModel",e.inputs.paying),v.Cb(5),v.oc("value",e.inputs.due),v.Cb(5),v.oc("value",e.inputs.refund),v.Cb(4),v.oc("disabled",e.editMode),v.Cb(4),v.oc("disabled",!e.editMode),v.Cb(2),v.oc("disabled",!e.editMode),v.Cb(2),v.oc("disabled",!e.editMode))},directives:[f.n,h.y,h.r,h.u,h.v,h.B,f.m,G,h.d,h.w,B,V.c,V.f,z.b,E.c,E.a,y.j,R.b],pipes:[f.g],styles:[".table[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{text-align:left}.table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100px}.tabPanel[_ngcontent-%COMP%]{min-height:200px;max-height:200px}.green[_ngcontent-%COMP%]{color:#1a6724;text-shadow:0 0 1px #b72828;font-style:oblique}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem}"]}),jt),Kt=((Ht=function(){function t(e,i){s(this,t),this.http=e,this.encoder=i,this.currentUrl=j.a.normUrl+"cash-counter/ip-advance"}return l(t,[{key:"getStart",value:function(){return this.http.get(this.currentUrl)}},{key:"getIPNos",value:function(t){return this.http.get("".concat(this.currentUrl,"/ip-nos/").concat(t))}},{key:"getPatientDetails",value:function(t){return this.http.get("".concat(this.currentUrl,"/").concat(t))}},{key:"saveAdvance",value:function(t){return this.http.post(this.currentUrl,t)}},{key:"updateAdvance",value:function(t){return this.http.patch("".concat(this.currentUrl,"/").concat(t.advanceId),t)}},{key:"deleteAdvance",value:function(t){return this.http.delete("".concat(this.currentUrl,"/").concat(t),{responseType:"text"})}}]),t}()).\u0275fac=function(t){return new(t||Ht)(v.Yb(Y.b),v.Yb(K.a))},Ht.\u0275prov=v.Kb({token:Ht,factory:Ht.\u0275fac}),Ht),qt=["cardTemplate"];function Qt(t,e){if(1&t&&v.Pb(0,"option",28),2&t){var i=e.$implicit;v.oc("value",i)("text",i)}}function Wt(t,e){if(1&t&&v.Pb(0,"option",28),2&t){var i=e.$implicit;v.oc("value",i.id)("text",i.ipNo)}}function Xt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"button",29),v.cc("click",function(){return v.zc(i),v.gc().saveAdvance()}),v.Jc(1),v.Tb()}if(2&t){var n=v.gc();v.oc("disabled",n.isSaving),v.Cb(1),v.Kc(n.isSaving?"Saving...":"Save")}}function Zt(t,e){if(1&t){var i=v.Vb();v.Ub(0,"button",29),v.cc("click",function(){return v.zc(i),v.gc().updateAdvance()}),v.Jc(1),v.Tb()}if(2&t){var n=v.gc();v.oc("disabled",n.isUpdating),v.Cb(1),v.Kc(n.isUpdating?"Updating...":"Update")}}function te(t,e){if(1&t&&(v.Ub(0,"mat-radio-button",30),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Lc("",i," ")}}function ee(t,e){if(1&t&&(v.Ub(0,"mat-option",30),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Kc(i)}}function ie(t,e){if(1&t){var i=v.Vb();v.Ub(0,"div",31),v.Ub(1,"mat-form-field"),v.Ub(2,"mat-label"),v.Jc(3,"Other Payment"),v.Tb(),v.Ub(4,"input",32),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.otherPayType=t}),v.Tb(),v.Ub(5,"mat-autocomplete",null,33),v.Hc(7,ee,2,2,"mat-option",19),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=v.wc(6),o=v.gc();v.Cb(4),v.oc("matAutocomplete",n)("ngModel",o.inputs.otherPayType),v.Cb(3),v.oc("ngForOf",o.payTypes)}}function ne(t,e){if(1&t){var i=v.Vb();v.Ub(0,"tr"),v.Pb(1,"td",34),v.Pb(2,"td",34),v.Pb(3,"td",34),v.hc(4,"date"),v.Ub(5,"td"),v.Ub(6,"button",35),v.cc("click",function(){v.zc(i);var t=e.index;return v.gc().editAdvance(t)}),v.Ub(7,"i",36),v.Jc(8,"edit"),v.Tb(),v.Tb(),v.Tb(),v.Ub(9,"td"),v.Ub(10,"button",37),v.cc("click",function(){v.zc(i);var t=e.$implicit;return v.gc().printAdvance(t.id)}),v.Ub(11,"i",36),v.Jc(12,"print"),v.Tb(),v.Tb(),v.Tb(),v.Ub(13,"td"),v.Ub(14,"button",38),v.cc("click",function(){v.zc(i);var t=e.$implicit;return v.gc().deleteAdvance(t.id)}),v.Ub(15,"i",36),v.Jc(16,"delete"),v.Tb(),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=e.$implicit;v.Cb(1),v.oc("textContent",n.advNo),v.Cb(1),v.oc("textContent",n.amount),v.Cb(1),v.oc("textContent",v.ic(4,3,n.date))}}function oe(t,e){if(1&t&&(v.Ub(0,"mat-option",30),v.Jc(1),v.Tb()),2&t){var i=e.$implicit;v.oc("value",i),v.Cb(1),v.Kc(i)}}function ae(t,e){if(1&t){var i=v.Vb();v.Ub(0,"div",39),v.Ub(1,"h4",40),v.Jc(2," Card Details"),v.Tb(),v.Tb(),v.Ub(3,"div",2),v.Ub(4,"mat-form-field"),v.Ub(5,"mat-label"),v.Jc(6,"Card No"),v.Tb(),v.Ub(7,"input",41),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.cardNo=t}),v.Tb(),v.Tb(),v.Tb(),v.Ub(8,"div",2),v.Ub(9,"mat-form-field"),v.Ub(10,"mat-label"),v.Jc(11,"Card Type"),v.Tb(),v.Ub(12,"input",32),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.cardType=t}),v.Tb(),v.Ub(13,"mat-autocomplete",null,33),v.Hc(15,oe,2,2,"mat-option",19),v.Tb(),v.Tb(),v.Tb(),v.Ub(16,"div",2),v.Ub(17,"mat-form-field"),v.Ub(18,"mat-label"),v.Jc(19,"Card Expiry"),v.Tb(),v.Ub(20,"input",42),v.cc("ngModelChange",function(t){return v.zc(i),v.gc().inputs.cardExpiry=t}),v.Tb(),v.Tb(),v.Tb(),v.Ub(21,"div",43),v.Ub(22,"div",3),v.Ub(23,"button",44),v.Jc(24,"Close"),v.Tb(),v.Tb(),v.Tb()}if(2&t){var n=v.wc(14),o=v.gc();v.Cb(7),v.oc("ngModel",o.inputs.cardNo),v.Cb(5),v.oc("matAutocomplete",n)("ngModel",o.inputs.cardType),v.Cb(3),v.oc("ngForOf",o.cardTypes),v.Cb(5),v.oc("ngModel",o.inputs.cardExpiry)}}var re,ce,le,se=[{path:"op-billing",component:wt,data:{page:"OP Billing"}},{path:"ip-advance",component:(re=function(){function e(t,i,n,o){s(this,e),this.common=t,this.service=i,this.toatsr=n,this.dialog=o}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.common.mainData.next({header:"IP Advance",treeView:"liCashCounter",subTreeView:"",menu:"liIPAdvance"}),this.initProperties(),this.service.getStart().toPromise().then(function(i){var n,o,a,r;(n=e.years).push.apply(n,t(i.years)),(o=e.ipNos).push.apply(o,t(i.ipNos)),(a=e.cardTypes).push.apply(a,t(i.cardTypes)),(r=e.payTypes).push.apply(r,t(i.payTypes)),e.years.length>0&&(e.inputs.year=i.years[0])})}},{key:"getIPNos",value:function(){var t=this;this.inputs.ipNo="",""!==this.inputs.year?this.service.getIPNos(this.inputs.year).toPromise().then(function(e){return t.ipNos=e}):this.ipNos=[]}},{key:"getPatientDetails",value:function(){var e=this;""!==this.inputs.year&&""!==this.inputs.ipNo?this.service.getPatientDetails(this.inputs.ipNo).toPromise().then(function(i){var n;for(var o in(n=e.advances).splice.apply(n,[0,e.advances.length].concat(t(i.advances))),i.data)e.inputs[o]=i.data[o]}):this.advances.length=0}},{key:"saveAdvance",value:function(){var t,e=this;""===this.inputs.year?this.toatsr.error("Select the Year!!!"):""===this.inputs.ipNo?this.toatsr.error("Select the IP No"):0===(null!==(t=this.inputs.advance)&&void 0!==t?t:0)?this.toatsr.error("Enter valid Advance Amount"):(this.isSaving=!0,this.service.saveAdvance(this.inputs).toPromise().then(function(t){t.status?(e.clearPage(),e.common.triggerSwal(t.message,"Print Bill","Success").then(function(i){i.isConfirmed&&e.common.printPage("advance/".concat(t.id))})):e.toatsr.warning(t.message)}).finally(function(){return e.isSaving=!1}))}},{key:"editAdvance",value:function(t){this.editMode=!0;var e=this.advances[t];this.inputs.advanceId=e.id,this.inputs.advance=e.amount,this.inputs.payType=e.payType,this.inputs.otherPayType=e.otherPayType,this.inputs.cardNo=e.cardNo,this.inputs.cardType=e.cardType,this.inputs.cardExpiry=e.cardExpiry}},{key:"updateAdvance",value:function(){var t,e=this;""===this.inputs.year?this.toatsr.error("Select the Year!!!"):""===this.inputs.ipNo?this.toatsr.error("Select the IP No"):0===(null!==(t=this.inputs.advance)&&void 0!==t?t:0)?this.toatsr.error("Enter valid Advance Amount"):(this.isUpdating=!0,this.service.updateAdvance(this.inputs).toPromise().then(function(t){t.status?(e.toatsr.success(t.message),e.clearPage()):e.toatsr.warning(t.message)}).finally(function(){return e.isUpdating=!1}))}},{key:"deleteAdvance",value:function(t){var e=this;this.common.triggerSwal("Do you want to Delete the Advance?").then(function(i){i.isConfirmed&&e.service.deleteAdvance(t).toPromise().then(function(t){e.toatsr.success(t),e.clearPage()})})}},{key:"printAdvance",value:function(t){this.common.printPage("advance/".concat(t))}},{key:"clearPage",value:function(){for(var t in this.editMode=this.isSaving=this.isUpdating=!1,this.advances.length=0,this.inputs)this.inputs[t]="";this.inputs.payType="Cash",this.inputs.advance=0,this.years.length>0&&(this.inputs.year=this.years[0],this.getIPNos())}},{key:"showCardDialog",value:function(t){"Card"===t&&this.dialog.open(this.cardTemplate)}},{key:"initProperties",value:function(){this.editMode=this.isSaving=!1,this.years=[],this.ipNos=[],this.advances=[],this.cardTypes=[],this.payTypes=[],this.paymentMethods=["Cash","Card","Others"],this.inputs={year:"",ipNo:"",ptId:"",name:"",age:"",gender:"",advance:0,advanceId:null,payType:"Cash",otherPayType:"",cardNo:"",cardType:"",cardExpiry:""}}}]),e}(),re.\u0275fac=function(t){return new(t||re)(v.Ob(it.a),v.Ob(Kt),v.Ob(et.b),v.Ob(R.a))},re.\u0275cmp=v.Ib({type:re,selectors:[["app-ipadvance"]],viewQuery:function(t,e){var i;1&t&&v.Nc(qt,1),2&t&&v.vc(i=v.dc())&&(e.cardTemplate=i.first)},features:[v.Bb([Kt])],decls:88,vars:15,consts:[[1,"container"],[1,"pl-2","pr-2","pb-2","background-All"],[1,"row"],[1,"col"],[1,"ml-lg-2",2,"font-size","18px","font-weight","bold"],[1,"col-lg-3"],[1,"badge"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value","text",4,"ngFor","ngForOf"],[1,"col-lg-2"],["readonly","",1,"form-control","form-control-sm",3,"value"],[1,"col-12","col-md-4"],["type","number","inputmode","numeric",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center","mt-2"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"col-lg-5","col-md-5","col-sm-5","col-12"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],["class","input-group",4,"ngIf"],[1,"row","mt-2"],[1,"col-md-8"],[1,"wells"],[1,"table-responsive",2,"min-height","150px","max-height","150px"],["id","tblAdvanceList",1,"table","table-bordered"],[4,"ngFor","ngForOf"],["cardTemplate",""],[3,"value","text"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"input-group"],["matInput","",3,"matAutocomplete","ngModel","ngModelChange"],["otherType","matAutocomplete"],[3,"textContent"],["mat-mini-fab","","color","primary",3,"click"],[1,"material-icons"],["mat-mini-fab","",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[1,"modal-title","text-center",2,"width","100%"],[1,"green","font-weight-bold"],["matInput","","autocomplete","off",3,"ngModel","ngModelChange"],["type","date","matInput","","autocomplete","off",3,"ngModel","ngModelChange"],[1,"row","text-center"],["mat-dialog-close","",1,"btn","btn-primary"]],template:function(t,e){1&t&&(v.Ub(0,"div",0),v.Ub(1,"div",1),v.Ub(2,"div",2),v.Ub(3,"div",3),v.Ub(4,"label",4),v.Jc(5,"\xa0Patient Details"),v.Tb(),v.Tb(),v.Tb(),v.Pb(6,"hr"),v.Ub(7,"div",2),v.Ub(8,"div",5),v.Ub(9,"label",6),v.Jc(10,"Bill Year"),v.Tb(),v.Ub(11,"select",7),v.cc("ngModelChange",function(t){return e.inputs.year=t})("change",function(){return e.getIPNos()}),v.Ub(12,"option",8),v.Jc(13,"Select"),v.Tb(),v.Hc(14,Qt,1,2,"option",9),v.Tb(),v.Tb(),v.Ub(15,"div",5),v.Ub(16,"label",6),v.Jc(17,"IP No"),v.Tb(),v.Ub(18,"select",7),v.cc("ngModelChange",function(t){return e.inputs.ipNo=t})("change",function(){return e.getPatientDetails()}),v.Ub(19,"option",8),v.Jc(20,"Select"),v.Tb(),v.Hc(21,Wt,1,2,"option",9),v.Tb(),v.Tb(),v.Tb(),v.Pb(22,"br"),v.Ub(23,"div",2),v.Ub(24,"div",10),v.Ub(25,"label",6),v.Jc(26,"Patient ID"),v.Tb(),v.Pb(27,"input",11),v.Tb(),v.Ub(28,"div",5),v.Ub(29,"label",6),v.Jc(30,"Patient Name"),v.Tb(),v.Pb(31,"input",11),v.Tb(),v.Ub(32,"div",10),v.Ub(33,"label",6),v.Jc(34,"Age"),v.Tb(),v.Pb(35,"input",11),v.Tb(),v.Ub(36,"div",10),v.Ub(37,"label",6),v.Jc(38,"Gender"),v.Tb(),v.Pb(39,"input",11),v.Tb(),v.Tb(),v.Tb(),v.Pb(40,"br"),v.Ub(41,"div",1),v.Ub(42,"div",2),v.Ub(43,"div",3),v.Ub(44,"label",4),v.Jc(45,"\xa0Advance Details"),v.Tb(),v.Tb(),v.Tb(),v.Ub(46,"div",2),v.Ub(47,"div",12),v.Ub(48,"label"),v.Jc(49,"Advance Amount"),v.Tb(),v.Ub(50,"input",13),v.cc("ngModelChange",function(t){return e.inputs.advance=t}),v.Tb(),v.Ub(51,"div",14),v.Hc(52,Xt,2,2,"button",15),v.Jc(53,"\xa0 "),v.Hc(54,Zt,2,2,"button",15),v.Ub(55,"button",16),v.cc("click",function(){return e.clearPage()}),v.Jc(56,"Reset"),v.Tb(),v.Tb(),v.Tb(),v.Ub(57,"div",17),v.Ub(58,"div"),v.Ub(59,"label",6),v.Jc(60," Paying Type :"),v.Tb(),v.Tb(),v.Ub(61,"mat-radio-group",18),v.cc("ngModelChange",function(t){return e.inputs.payType=t})("click",function(t){return e.showCardDialog(t.target.innerText)}),v.Hc(62,te,2,2,"mat-radio-button",19),v.Tb(),v.Hc(63,ie,8,3,"div",20),v.Tb(),v.Tb(),v.Ub(64,"div",21),v.Ub(65,"div",22),v.Ub(66,"div",23),v.Ub(67,"div",24),v.Ub(68,"table",25),v.Ub(69,"thead"),v.Ub(70,"tr"),v.Ub(71,"th"),v.Jc(72,"Rec No"),v.Tb(),v.Ub(73,"th"),v.Jc(74,"Amount"),v.Tb(),v.Ub(75,"th"),v.Jc(76,"Date"),v.Tb(),v.Ub(77,"th"),v.Jc(78,"Edit"),v.Tb(),v.Ub(79,"th"),v.Jc(80,"Print"),v.Tb(),v.Ub(81,"th"),v.Jc(82,"Delete"),v.Tb(),v.Tb(),v.Tb(),v.Ub(83,"tbody"),v.Hc(84,ne,17,5,"tr",26),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Pb(85,"br"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Hc(86,ae,25,5,"ng-template",null,27,v.Ic)),2&t&&(v.Cb(11),v.oc("ngModel",e.inputs.year),v.Cb(3),v.oc("ngForOf",e.years),v.Cb(4),v.oc("ngModel",e.inputs.ipNo),v.Cb(3),v.oc("ngForOf",e.ipNos),v.Cb(6),v.oc("value",e.inputs.ptId),v.Cb(4),v.oc("value",e.inputs.name),v.Cb(4),v.oc("value",e.inputs.age),v.Cb(4),v.oc("value",e.inputs.gender),v.Cb(11),v.oc("ngModel",e.inputs.advance),v.Cb(2),v.oc("ngIf",!e.editMode),v.Cb(2),v.oc("ngIf",e.editMode),v.Cb(7),v.oc("ngModel",e.inputs.payType),v.Cb(1),v.oc("ngForOf",e.paymentMethods),v.Cb(1),v.oc("ngIf","Others"===e.inputs.payType),v.Cb(21),v.oc("ngForOf",e.advances))},directives:[h.y,h.r,h.u,h.v,h.B,f.m,h.w,h.d,f.n,g.b,G,B,V.c,V.f,z.b,E.c,E.a,y.j,R.b],pipes:[f.f],styles:[""]}),re),data:{page:"IP Advance"}},{path:"ip-billing",component:Yt,data:{page:"IP Billing"}}],ue=((le=l(function t(){s(this,t)})).\u0275fac=function(t){return new(t||le)},le.\u0275mod=v.Mb({type:le}),le.\u0275inj=v.Lb({imports:[[H.h.forChild(se)],H.h]}),le),be=((ce=l(function t(){s(this,t)})).\u0275fac=function(t){return new(t||ce)},ce.\u0275mod=v.Mb({type:ce}),ce.\u0275inj=v.Lb({imports:[[h.m,h.x,f.c,L,g.c,m.b,R.c,E.b,V.e,z.c,ue]]}),ce)}}])}();